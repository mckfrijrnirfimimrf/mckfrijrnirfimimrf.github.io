<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>universal app</title>

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet" />

<style>
body {
    margin: 0;
    background: #1b1b1b;
    font-family: Roboto, sans-serif;
    color: #fff;
}
#actionbar {
    background: #212121;
    height: 56px;
    display: flex;
    align-items: center;
    padding: 0 12px;
    border-bottom: 1px solid #000;
}
.material-icon {
    font-family: "Material Symbols Rounded";
    font-variation-settings:
        'FILL' 1,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24;
    font-size: 32px;
    color: white;
}
#ytIcon {
    font-size: 34px;
}
#searchIcon {
    margin-left: auto;
    cursor: pointer;
    opacity: .85;
    font-size: 30px;
}
#searchBox {
    display: none;
    background: #303030;
    padding: 10px;
}
#searchBox input {
    width: 96%;
    padding: 10px;
    border: none;
    background: #424242;
    color: white;
    font-size: 16px;
    border-radius: 3px;
}
#videos {
    padding: 10px;
}
.video {
    margin-bottom: 18px;
    background: #2a2a2a;
    padding: 10px;
}
.video img.thumbnail {
    width: 100%;
}
.video .title {
    font-size: 16px;
    margin-top: 8px;
    font-weight: bold;
    color: #fff;
}
.video .channel {
    font-size: 13px;
    color: #bdbdbd;
}
#playerPopup {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.9);
}
#playerPopup iframe {
    width: 90%;
    height: 55%;
    margin: 80px auto 0;
    display: block;
}
#closePlayer {
    position: absolute;
    top: 20px; right: 20px;
    font-size: 24px;
    color: white;
    cursor: pointer;
}
</style>
</head>

<body>

<div id="actionbar">

    <span id="searchIcon" class="material-icon">search</span>
</div>

<div id="searchBox">
    <input id="searchInput" type="text" placeholder="Search youtube...">
</div>

<div id="videos">Connecting to youtube...</div>

<div id="playerPopup">
    <div id="closePlayer">X</div>
    <iframe id="player" src="" frameborder="0" allowfullscreen></iframe>
</div>

<script>
loadDefaultVideos();

function loadDefaultVideos() {
    fetch(`https://www.googleapis.com/youtube/v3/videos?chart=mostPopular&part=snippet&maxResults=10&key=AIzaSyAxMRxshEh3_VtrMGIiyQ3jF4i37Y5M9d4`)
        .then(res => res.json())
        .then(data => {
            const container = document.getElementById("videos");
            container.innerHTML = "";
            data.items.forEach(item => {
                const vid = document.createElement("div");
                vid.className = "video";
                vid.innerHTML = `
                    <img class="thumbnail" src="${item.snippet.thumbnails.medium.url}">
                    <div class="title">${item.snippet.title}</div>
                    <div class="channel">${item.snippet.channelTitle}</div>
                `;
                vid.onclick = () => playVideo(item.id);
                container.appendChild(vid);
            });
        });
}

function searchYouTube(query) {
    fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=10&q=${encodeURIComponent(query)}&key=AIzaSyAxMRxshEh3_VtrMGIiyQ3jF4i37Y5M9d4`)
        .then(res => res.json())
        .then(data => {
            const container = document.getElementById("videos");
            container.innerHTML = "";
            data.items.forEach(item => {
                const vid = document.createElement("div");
                vid.className = "video";
                vid.innerHTML = `
                    <img class="thumbnail" src="${item.snippet.thumbnails.medium.url}">
                    <div class="title">${item.snippet.title}</div>
                    <div class="channel">${item.snippet.channelTitle}</div>
                `;
                vid.onclick = () => playVideo(item.id.videoId);
                container.appendChild(vid);
            });
        });
}

function playVideo(id) {
    document.getElementById("player").src = "https://www.youtube.com/embed/" + id + "?autoplay=1";
    document.getElementById("playerPopup").style.display = "block";
}

document.getElementById("closePlayer").onclick = () => {
    document.getElementById("player").src = "";
    document.getElementById("playerPopup").style.display = "none";
};

document.getElementById("searchIcon").onclick = () => {
    const box = document.getElementById("searchBox");
    box.style.display = box.style.display === "block" ? "none" : "block";
    document.getElementById("searchInput").focus();
};

document.getElementById("searchInput").addEventListener("keypress", e => {
    if (e.key === "Enter") searchYouTube(e.target.value);
});
</script>

</body>
</html>
